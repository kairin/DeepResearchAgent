{
  "unit_tests": {
    "command": "/home/kkk/Apps/DeepResearchAgent/.venv/bin/python3 -m pytest /home/kkk/Apps/DeepResearchAgent/tests/unit -v --tb=short --durations=10 --strict-markers -m unit --quiet",
    "description": "Unit Tests",
    "returncode": 0,
    "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.13.3, pytest-8.4.2, pluggy-1.6.0\nrootdir: /home/kkk/Apps/DeepResearchAgent\nconfigfile: pyproject.toml\nplugins: langsmith-0.3.45, cov-7.0.0, anyio-4.10.0, asyncio-1.2.0\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\ncollected 27 items\n\ntests/unit/test_local_python_executor.py ...........................     [100%]\n\n=============================== warnings summary ===============================\n.venv/lib/python3.13/site-packages/pydantic/v1/typing.py:68\n.venv/lib/python3.13/site-packages/pydantic/v1/typing.py:68\n.venv/lib/python3.13/site-packages/pydantic/v1/typing.py:68\n.venv/lib/python3.13/site-packages/pydantic/v1/typing.py:68\n.venv/lib/python3.13/site-packages/pydantic/v1/typing.py:68\n.venv/lib/python3.13/site-packages/pydantic/v1/typing.py:68\n.venv/lib/python3.13/site-packages/pydantic/v1/typing.py:68\n  /home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/pydantic/v1/typing.py:68: DeprecationWarning: Failing to pass a value to the 'type_params' parameter of 'typing.ForwardRef._evaluate' is deprecated, as it leads to incorrect behaviour when calling typing.ForwardRef._evaluate on a stringified annotation that references a PEP 695 type parameter. It will be disallowed in Python 3.15.\n    return cast(Any, type_)._evaluate(globalns, localns, recursive_guard=set())\n\n.venv/lib/python3.13/site-packages/pydantic/_internal/_config.py:295\n.venv/lib/python3.13/site-packages/pydantic/_internal/_config.py:295\n  /home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/pydantic/_internal/_config.py:295: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.10/migration/\n    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)\n\n.venv/lib/python3.13/site-packages/pydub/utils.py:300\n  /home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/pydub/utils.py:300: SyntaxWarning: invalid escape sequence '\\('\n    m = re.match('([su]([0-9]{1,2})p?) \\(([0-9]{1,2}) bit\\)$', token)\n\n.venv/lib/python3.13/site-packages/pydub/utils.py:301\n  /home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/pydub/utils.py:301: SyntaxWarning: invalid escape sequence '\\('\n    m2 = re.match('([su]([0-9]{1,2})p?)( \\(default\\))?$', token)\n\n.venv/lib/python3.13/site-packages/pydub/utils.py:310\n  /home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/pydub/utils.py:310: SyntaxWarning: invalid escape sequence '\\('\n    elif re.match('(flt)p?( \\(default\\))?$', token):\n\n.venv/lib/python3.13/site-packages/pydub/utils.py:314\n  /home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/pydub/utils.py:314: SyntaxWarning: invalid escape sequence '\\('\n    elif re.match('(dbl)p?( \\(default\\))?$', token):\n\n.venv/lib/python3.13/site-packages/speech_recognition/__init__.py:7\n  /home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/speech_recognition/__init__.py:7: DeprecationWarning: aifc was removed in Python 3.13. Please be aware that you are currently NOT using standard 'aifc', but instead a separately installed 'standard-aifc'.\n    import aifc\n\n-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html\n============================= slowest 10 durations =============================\n\n(10 durations < 0.005s hidden.  Use -vv to show these durations.)\n======================= 27 passed, 14 warnings in 9.54s ========================\n",
    "stderr": "",
    "duration": 13.61635422706604,
    "success": true
  },
  "integration_tests": {
    "test_web_searcher.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_web_searcher.py",
      "description": "Integration Test: test_web_searcher.py",
      "returncode": 1,
      "stdout": "WARNING  [firecrawl] No API key provided for cloud service\nWARNING  [firecrawl] No API key provided for cloud service\nWARNING  [firecrawl] No API key provided for cloud service\n",
      "stderr": "\u001b[92m07:18:08 - logger:INFO\u001b[0m: test_web_searcher.py:44 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:18:08 - logger:INFO\u001b[0m: test_web_searcher.py:45 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n\u001b[92m07:18:08 - logger:INFO\u001b[0m: test_web_searcher.py:48 - |                                      Registry of tool                                     \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Names                   \u2503 Objects                                                      \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 auto_browser_use_tool   \u2502 <class 'src.tools.auto_browser.AutoBrowserUseTool'>          \u2502\n\u2502 deep_analyzer_tool      \u2502 <class 'src.tools.deep_analyzer.DeepAnalyzerTool'>           \u2502\n\u2502 deep_researcher_tool    \u2502 <class 'src.tools.deep_researcher.DeepResearcherTool'>       \u2502\n\u2502 file_reader_tool        \u2502 <class 'src.tools.file_reader.FileReaderTool'>               \u2502\n\u2502 image_generator_tool    \u2502 <class 'src.tools.image_generator.ImageGeneratorTool'>       \u2502\n\u2502 oai_deep_research_tool  \u2502 <class 'src.tools.oai_deep_research.OAIDeepResearchTool'>    \u2502\n\u2502 planning_tool           \u2502 <class 'src.tools.planning.PlanningTool'>                    \u2502\n\u2502 python_interpreter_tool \u2502 <class 'src.tools.python_interpreter.PythonInterpreterTool'> \u2502\n\u2502 video_generator_tool    \u2502 <class 'src.tools.video_generator.VideoGeneratorTool'>       \u2502\n\u2502 web_fetcher_tool        \u2502 <class 'src.tools.web_fetcher.WebFetcherTool'>               \u2502\n\u2502 web_searcher_tool       \u2502 <class 'src.tools.web_searcher.WebSearcherTool'>             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u001b[92m07:18:08 - logger:INFO\u001b[0m: web_searcher.py:221 - \ud83d\udd0e Attempting search with Firecrawl...\nTraceback (most recent call last):\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 114, in __call__\n    result = await fn(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/web_searcher.py\", line 318, in _perform_search_with_engine\n    for result in await engine.perform_search(\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<5 lines>...\n    )\n    ^\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/search/firecrawl_search.py\", line 63, in perform_search\n    results = search(params)\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/search/firecrawl_search.py\", line 20, in search\n    app = FirecrawlApp(\n        api_key=os.getenv(\"FIRECRAWL_API_KEY\"),\n    )\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/firecrawl/client.py\", line 176, in __init__\n    self._v1_client = V1FirecrawlApp(api_key=api_key, api_url=api_url) if V1FirecrawlApp else None\n                      ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/firecrawl/v1/client.py\", line 516, in __init__\n    raise ValueError('No API key provided')\nValueError: No API key provided\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/kkk/Apps/DeepResearchAgent/tests/integration/test_web_searcher.py\", line 55, in <module>\n    search_response = asyncio.run(web_searcher_tool.forward(\n        query=task,\n    ))\n  File \"/usr/lib/python3.13/asyncio/runners.py\", line 195, in run\n    return runner.run(main)\n           ~~~~~~~~~~^^^^^^\n  File \"/usr/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/usr/lib/python3.13/asyncio/base_events.py\", line 719, in run_until_complete\n    return future.result()\n           ~~~~~~~~~~~~~^^\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/web_searcher.py\", line 180, in forward\n    results = await self._try_all_engines(query, self.num_results, search_params)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/web_searcher.py\", line 222, in _try_all_engines\n    search_items = await self._perform_search_with_engine(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        engine, query, num_results, search_params\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 189, in async_wrapped\n    return await copy(fn, *args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 111, in __call__\n    do = await self.iter(retry_state=retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/tenacity/asyncio/__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/tenacity/_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/tenacity/__init__.py\", line 421, in exc_check\n    raise retry_exc from fut.exception()\ntenacity.RetryError: RetryError[<Future at 0x7dc74a795a90 state=finished raised ValueError>]\n",
      "duration": 8.501833200454712,
      "success": false
    },
    "test_config.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_config.py",
      "description": "Integration Test: test_config.py",
      "returncode": 0,
      "stdout": "",
      "stderr": "\u001b[92m07:18:16 - logger:INFO\u001b[0m: test_config.py:42 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:18:16 - logger:INFO\u001b[0m: test_config.py:43 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n",
      "duration": 5.297107934951782,
      "success": true
    },
    "test_researcher.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_researcher.py",
      "description": "Integration Test: test_researcher.py",
      "returncode": 0,
      "stdout": "INFO     [src.models.cli_detector] CLI Tool Detection Results:\nINFO     [src.models.cli_detector] \u2705 claude_code_cli: Available\nINFO     [src.models.cli_detector]    Version: claude-code-cli\nINFO     [src.models.cli_detector] \u2705 gemini_cli: Available\nINFO     [src.models.cli_detector]    Account: kairin@gmail.com\nINFO     [src.models.cli_detector] Available CLI model mappings:\nINFO     [src.models.cli_detector]   claude-3.7-sonnet-thinking \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude37-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude-4-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   gemini-2.5-pro \u2192 gemini-cli\nINFO     [src.models.cli_detector]   gemini-vision \u2192 gemini-cli\nINFO     [src.models.api_validator] API Validation Complete. Available providers: ['local']\nWARNING  [src.models.api_validator] OpenAI issues: ['API Key: OPENAI_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Anthropic issues: ['API Key: ANTHROPIC_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Google issues: ['Either GOOGLE_API_KEY or GOOGLE_APPLICATION_CREDENTIALS required']\nWARNING  [firecrawl] No API key provided for cloud service\nWARNING  [firecrawl] No API key provided for cloud service\nWARNING  [firecrawl] No API key provided for cloud service\nError: DeepResearchTool failed to complete the research cycle: RetryError[<Future at 0x7e3990886ad0 state=finished raised ValueError>]\n",
      "stderr": "\u001b[92m07:18:21 - logger:INFO\u001b[0m: test_researcher.py:45 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:18:21 - logger:INFO\u001b[0m: test_researcher.py:46 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n\u001b[92m07:18:21 - logger:INFO\u001b[0m: models.py:41 - Detecting CLI tools...\n\u001b[92m07:18:23 - logger:INFO\u001b[0m: cli_models.py:348 - Registered Claude Code CLI models\n\u001b[92m07:18:23 - logger:INFO\u001b[0m: cli_models.py:356 - Registered Gemini CLI models\n\u001b[92m07:18:23 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-code-cli\n\u001b[92m07:18:23 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-3.7-sonnet-thinking\n\u001b[92m07:18:23 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude37-sonnet\n\u001b[92m07:18:23 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-cli\n\u001b[92m07:18:23 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-2.5-pro\n\u001b[92m07:18:23 - logger:INFO\u001b[0m: models.py:52 - Validating API configurations...\n\u001b[92m07:18:23 - logger:WARNING\u001b[0m: models.py:89 - Skipping OpenAI models - configuration invalid\n\u001b[92m07:18:23 - logger:WARNING\u001b[0m: models.py:97 - Skipping Anthropic models - configuration invalid\n\u001b[92m07:18:23 - logger:WARNING\u001b[0m: models.py:106 - Skipping Google models - configuration invalid\n\u001b[92m07:18:23 - logger:INFO\u001b[0m: models.py:585 - Using local proxy for LangChain models\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: models.py:678 - Using local proxy for DeepSeek models\n\u001b[92m07:18:24 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:18:24 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: models.py:154 - Aliased 'claude-4-sonnet' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gemini-vision' -> 'qwen2.5-14b-instruct'\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4.1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4o' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3-deep-research' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:18:24 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'imagen' -> 'local-image-placeholder'\n\u001b[92m07:18:24 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-predict' -> 'local-video-placeholder'\n\u001b[92m07:18:24 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-fetch' -> 'local-video-placeholder'\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: models.py:77 - Successfully registered 25 models\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: test_researcher.py:51 - Registered models: claude-code-cli, claude-3.7-sonnet-thinking, claude37-sonnet, gemini-cli, gemini-2.5-pro, qwen2.5-7b-instruct, qwen2.5-14b-instruct, qwen2.5-32b-instruct, Qwen, Qwen-VL, langchain-gpt-4o, langchain-gpt-4.1, langchain-o3, deepseek-chat, deepseek-reasoner, claude-4-sonnet, gemini-vision, gpt-4.1, gpt-4o, o1, o3, o3-deep-research, imagen, veo3-predict, veo3-fetch\n\u001b[92m07:18:24 - logger:INFO\u001b[0m: test_researcher.py:54 - |                                      Registry of tool                                     \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Names                   \u2503 Objects                                                      \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 auto_browser_use_tool   \u2502 <class 'src.tools.auto_browser.AutoBrowserUseTool'>          \u2502\n\u2502 deep_analyzer_tool      \u2502 <class 'src.tools.deep_analyzer.DeepAnalyzerTool'>           \u2502\n\u2502 deep_researcher_tool    \u2502 <class 'src.tools.deep_researcher.DeepResearcherTool'>       \u2502\n\u2502 file_reader_tool        \u2502 <class 'src.tools.file_reader.FileReaderTool'>               \u2502\n\u2502 image_generator_tool    \u2502 <class 'src.tools.image_generator.ImageGeneratorTool'>       \u2502\n\u2502 oai_deep_research_tool  \u2502 <class 'src.tools.oai_deep_research.OAIDeepResearchTool'>    \u2502\n\u2502 planning_tool           \u2502 <class 'src.tools.planning.PlanningTool'>                    \u2502\n\u2502 python_interpreter_tool \u2502 <class 'src.tools.python_interpreter.PythonInterpreterTool'> \u2502\n\u2502 video_generator_tool    \u2502 <class 'src.tools.video_generator.VideoGeneratorTool'>       \u2502\n\u2502 web_fetcher_tool        \u2502 <class 'src.tools.web_fetcher.WebFetcherTool'>               \u2502\n\u2502 web_searcher_tool       \u2502 <class 'src.tools.web_searcher.WebSearcherTool'>             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u001b[92m07:19:03 - logger:WARNING\u001b[0m: deep_researcher.py:336 - DeepResearchTool failed to generate optimized query: ChatMessage(role='assistant', content='\"Atlantic Puffin Fratercula arctica Wikipedia revision history before 2020 visual edit tags\"', tool_calls=None, raw=ChatCompletionOutput(choices=[ChatCompletionOutputComplete(finish_reason='stop', index=0, message=ChatCompletionOutputMessage(role='assistant', content='\"Atlantic Puffin Fratercula arctica Wikipedia revision history before 2020 visual edit tags\"', tool_call_id=None, tool_calls=None), logprobs=None)], created=1758064740666, id='3c88fd1f-c47b-4994-be72-a741b6cfa3b1', model='Qwen/Qwen2.5-32B-Instruct', system_fingerprint='', usage=ChatCompletionOutputUsage(completion_tokens=24, prompt_tokens=90, total_tokens=114), object='chat.completion'), token_usage=TokenUsage(input_tokens=90, output_tokens=24, total_tokens=114))\n\u001b[92m07:19:03 - logger:INFO\u001b[0m: deep_researcher.py:364 - DeepResearchTool Research cycle at depth 1 - Query: Atlantic Puffin Fratercula arctica Wikipedia page revision history visual edit tags before 2020\n\u001b[92m07:19:03 - logger:INFO\u001b[0m: web_searcher.py:221 - \ud83d\udd0e Attempting search with Firecrawl...\n\u001b[92m07:19:06 - logger:ERROR\u001b[0m: deep_researcher.py:288 - DeepResearchTool failed to complete the research cycle: RetryError[<Future at 0x7e3990886ad0 state=finished raised ValueError>]\n",
      "duration": 49.95451831817627,
      "success": true
    },
    "test_messages.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_messages.py",
      "description": "Integration Test: test_messages.py",
      "returncode": 0,
      "stdout": "INFO     [src.models.cli_detector] CLI Tool Detection Results:\nINFO     [src.models.cli_detector] \u2705 claude_code_cli: Available\nINFO     [src.models.cli_detector]    Version: claude-code-cli\nINFO     [src.models.cli_detector] \u2705 gemini_cli: Available\nINFO     [src.models.cli_detector]    Account: kairin@gmail.com\nINFO     [src.models.cli_detector] Available CLI model mappings:\nINFO     [src.models.cli_detector]   claude-3.7-sonnet-thinking \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude37-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude-4-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   gemini-2.5-pro \u2192 gemini-cli\nINFO     [src.models.cli_detector]   gemini-vision \u2192 gemini-cli\nINFO     [src.models.api_validator] API Validation Complete. Available providers: ['local']\nWARNING  [src.models.api_validator] OpenAI issues: ['API Key: OPENAI_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Anthropic issues: ['API Key: ANTHROPIC_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Google issues: ['Either GOOGLE_API_KEY or GOOGLE_APPLICATION_CREDENTIALS required']\n",
      "stderr": "\u001b[92m07:19:11 - logger:INFO\u001b[0m: test_messages.py:62 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:19:11 - logger:INFO\u001b[0m: test_messages.py:63 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n\u001b[92m07:19:11 - logger:INFO\u001b[0m: models.py:41 - Detecting CLI tools...\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: cli_models.py:348 - Registered Claude Code CLI models\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: cli_models.py:356 - Registered Gemini CLI models\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-code-cli\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-3.7-sonnet-thinking\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude37-sonnet\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-cli\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-2.5-pro\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:52 - Validating API configurations...\n\u001b[92m07:19:13 - logger:WARNING\u001b[0m: models.py:89 - Skipping OpenAI models - configuration invalid\n\u001b[92m07:19:13 - logger:WARNING\u001b[0m: models.py:97 - Skipping Anthropic models - configuration invalid\n\u001b[92m07:19:13 - logger:WARNING\u001b[0m: models.py:106 - Skipping Google models - configuration invalid\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:605 - Using remote API for LangChain models\n\u001b[92m07:19:13 - logger:WARNING\u001b[0m: models.py:181 - Local API key OPENAI_API_KEY is not set, using remote API key OPENAI_API_KEY\n\u001b[92m07:19:13 - logger:WARNING\u001b[0m: models.py:188 - Local API base OPENAI_API_BASE is not set, using remote API base OPENAI_API_BASE\n\u001b[92m07:19:13 - logger:WARNING\u001b[0m: models.py:718 - DeepSeek models are not supported in remote API mode.\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:154 - Aliased 'claude-4-sonnet' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gemini-vision' -> 'qwen2.5-14b-instruct'\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4.1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4o' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3-deep-research' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:13 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'imagen' -> 'local-image-placeholder'\n\u001b[92m07:19:13 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-predict' -> 'local-video-placeholder'\n\u001b[92m07:19:13 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-fetch' -> 'local-video-placeholder'\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: models.py:77 - Successfully registered 23 models\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: test_messages.py:69 - Registed models: claude-code-cli, claude-3.7-sonnet-thinking, claude37-sonnet, gemini-cli, gemini-2.5-pro, qwen2.5-7b-instruct, qwen2.5-14b-instruct, qwen2.5-32b-instruct, Qwen, Qwen-VL, langchain-gpt-4o, langchain-gpt-4.1, langchain-o3, claude-4-sonnet, gemini-vision, gpt-4.1, gpt-4o, o1, o3, o3-deep-research, imagen, veo3-predict, veo3-fetch\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: test_messages.py:49 - | Single Text Message: [\n    {\n        \"role\": \"user\",\n        \"content\": \"What is the capital of France?\"\n    }\n]\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: test_messages.py:49 - | Multiple Text Messages: [\n    {\n        \"role\": \"user\",\n        \"content\": [\n            {\n                \"type\": \"text\",\n                \"text\": \"What is the capital of France?\"\n            },\n            {\n                \"type\": \"text\",\n                \"text\": \"What is the capital of Germany?\"\n            }\n        ]\n    }\n]\n\u001b[92m07:19:13 - logger:INFO\u001b[0m: test_messages.py:49 - | Single Text Message with Image: [\n    {\n        \"role\": \"user\",\n        \"content\": [\n            {\n                \"type\": \"text\",\n                \"text\": \"What is the capital of France?\"\n            },\n            {\n                \"type\": \"image_url\",\n                \"image_url\": {\n                    \"url\": \"data:image/png;base64,iVBORw0K...\"\n                }\n            }\n        ]\n    }\n]\n\u001b[92m07:19:14 - logger:INFO\u001b[0m: test_messages.py:49 - | Single Text Message with Image (No Convert): [\n    {\n        \"role\": \"user\",\n        \"content\": [\n            {\n                \"type\": \"text\",\n                \"text\": \"What is the capital of France?\"\n            },\n            {\n                \"type\": \"image\",\n                \"image\": \"iVBORw0KGgoAAAANSUhEUgAAEccAAA...\"\n            }\n        ]\n    }\n]\n\u001b[92m07:19:14 - logger:INFO\u001b[0m: test_messages.py:49 - | Single Text Message with Response API: [\n    {\n        \"role\": \"user\",\n        \"content\": [\n            {\n                \"type\": \"text\",\n                \"text\": \"What is the capital of France?\"\n            }\n        ]\n    }\n]\n\u001b[92m07:19:14 - logger:INFO\u001b[0m: test_messages.py:49 - | Multiple Text Messages with Response API: [\n    {\n        \"role\": \"user\",\n        \"content\": [\n            {\n                \"type\": \"text\",\n                \"text\": \"What is the capital of France?\"\n            },\n            {\n                \"type\": \"text\",\n                \"text\": \"What is the capital of Germany?\"\n            }\n        ]\n    }\n]\n",
      "duration": 8.0495126247406,
      "success": true
    },
    "test_mdconverter.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_mdconverter.py",
      "description": "Integration Test: test_mdconverter.py",
      "returncode": 0,
      "stdout": "INFO     [src.models.cli_detector] CLI Tool Detection Results:\nINFO     [src.models.cli_detector] \u2705 claude_code_cli: Available\nINFO     [src.models.cli_detector]    Version: claude-code-cli\nINFO     [src.models.cli_detector] \u2705 gemini_cli: Available\nINFO     [src.models.cli_detector]    Account: kairin@gmail.com\nINFO     [src.models.cli_detector] Available CLI model mappings:\nINFO     [src.models.cli_detector]   claude-3.7-sonnet-thinking \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude37-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude-4-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   gemini-2.5-pro \u2192 gemini-cli\nINFO     [src.models.cli_detector]   gemini-vision \u2192 gemini-cli\nINFO     [src.models.api_validator] API Validation Complete. Available providers: ['local']\nWARNING  [src.models.api_validator] OpenAI issues: ['API Key: OPENAI_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Anthropic issues: ['API Key: ANTHROPIC_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Google issues: ['Either GOOGLE_API_KEY or GOOGLE_APPLICATION_CREDENTIALS required']\nNone\n",
      "stderr": "\u001b[92m07:19:19 - logger:INFO\u001b[0m: test_mdconverter.py:47 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:19:19 - logger:INFO\u001b[0m: test_mdconverter.py:48 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n\u001b[92m07:19:19 - logger:INFO\u001b[0m: models.py:41 - Detecting CLI tools...\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: cli_models.py:348 - Registered Claude Code CLI models\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: cli_models.py:356 - Registered Gemini CLI models\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-code-cli\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-3.7-sonnet-thinking\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude37-sonnet\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-cli\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-2.5-pro\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:52 - Validating API configurations...\n\u001b[92m07:19:21 - logger:WARNING\u001b[0m: models.py:89 - Skipping OpenAI models - configuration invalid\n\u001b[92m07:19:21 - logger:WARNING\u001b[0m: models.py:97 - Skipping Anthropic models - configuration invalid\n\u001b[92m07:19:21 - logger:WARNING\u001b[0m: models.py:106 - Skipping Google models - configuration invalid\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:585 - Using local proxy for LangChain models\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:678 - Using local proxy for DeepSeek models\n\u001b[92m07:19:21 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:19:21 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:154 - Aliased 'claude-4-sonnet' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gemini-vision' -> 'qwen2.5-14b-instruct'\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4.1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4o' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3-deep-research' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:21 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'imagen' -> 'local-image-placeholder'\n\u001b[92m07:19:21 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-predict' -> 'local-video-placeholder'\n\u001b[92m07:19:21 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-fetch' -> 'local-video-placeholder'\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: models.py:77 - Successfully registered 25 models\n\u001b[92m07:19:21 - logger:INFO\u001b[0m: test_mdconverter.py:53 - Registed models: claude-code-cli, claude-3.7-sonnet-thinking, claude37-sonnet, gemini-cli, gemini-2.5-pro, qwen2.5-7b-instruct, qwen2.5-14b-instruct, qwen2.5-32b-instruct, Qwen, Qwen-VL, langchain-gpt-4o, langchain-gpt-4.1, langchain-o3, deepseek-chat, deepseek-reasoner, claude-4-sonnet, gemini-vision, gpt-4.1, gpt-4o, o1, o3, o3-deep-research, imagen, veo3-predict, veo3-fetch\n\u001b[92m07:19:21 - logger:ERROR\u001b[0m: mdconvert.py:172 - Error during conversion: 404 Client Error: Not Found for url: https://www.theguardian.com/food/2021/may/01/yotam-ottolenghis-recipes-for-takeaway-classics\n",
      "duration": 7.229494333267212,
      "success": true
    },
    "test_analyzer.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_analyzer.py",
      "description": "Integration Test: test_analyzer.py",
      "returncode": 1,
      "stdout": "",
      "stderr": "Traceback (most recent call last):\n  File \"/home/kkk/Apps/DeepResearchAgent/tests/integration/test_analyzer.py\", line 25, in <module>\n    deep_analyzer = DeepAnalyzerTool()\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/tools.py\", line 67, in new_init\n    original_init(self, *args, **kwargs)\n    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/deep_analyzer.py\", line 70, in __init__\n    for model_id in self.analyzer_model_ids\n                    ^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: 'NoneType' object is not iterable\n",
      "duration": 5.322916507720947,
      "success": false
    },
    "test_web_fetcher.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_web_fetcher.py",
      "description": "Integration Test: test_web_fetcher.py",
      "returncode": 1,
      "stdout": "WARNING  [firecrawl] No API key provided for cloud service\n",
      "stderr": "\u001b[92m07:19:32 - logger:INFO\u001b[0m: test_web_fetcher.py:44 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:19:32 - logger:INFO\u001b[0m: test_web_fetcher.py:45 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n\u001b[92m07:19:32 - logger:INFO\u001b[0m: test_web_fetcher.py:48 - |                                      Registry of tool                                     \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Names                   \u2503 Objects                                                      \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 auto_browser_use_tool   \u2502 <class 'src.tools.auto_browser.AutoBrowserUseTool'>          \u2502\n\u2502 deep_analyzer_tool      \u2502 <class 'src.tools.deep_analyzer.DeepAnalyzerTool'>           \u2502\n\u2502 deep_researcher_tool    \u2502 <class 'src.tools.deep_researcher.DeepResearcherTool'>       \u2502\n\u2502 file_reader_tool        \u2502 <class 'src.tools.file_reader.FileReaderTool'>               \u2502\n\u2502 image_generator_tool    \u2502 <class 'src.tools.image_generator.ImageGeneratorTool'>       \u2502\n\u2502 oai_deep_research_tool  \u2502 <class 'src.tools.oai_deep_research.OAIDeepResearchTool'>    \u2502\n\u2502 planning_tool           \u2502 <class 'src.tools.planning.PlanningTool'>                    \u2502\n\u2502 python_interpreter_tool \u2502 <class 'src.tools.python_interpreter.PythonInterpreterTool'> \u2502\n\u2502 video_generator_tool    \u2502 <class 'src.tools.video_generator.VideoGeneratorTool'>       \u2502\n\u2502 web_fetcher_tool        \u2502 <class 'src.tools.web_fetcher.WebFetcherTool'>               \u2502\n\u2502 web_searcher_tool       \u2502 <class 'src.tools.web_searcher.WebSearcherTool'>             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u001b[92m07:19:32 - logger:ERROR\u001b[0m: web_fetcher.py:38 - Failed to fetch content from https://www.quora.com/If-Eliud-Kipchoge-can-maintain-such-a-fast-pace-over-26-2-miles-why-can-t-he-manage-to-break-the-single-mile-world-record\n\u001b[92m07:19:32 - logger:ERROR\u001b[0m: web_fetcher.py:44 - Error fetching content: DocumentConverterResult.__init__() got an unexpected keyword argument 'markdown'\nTraceback (most recent call last):\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/web_fetcher.py\", line 39, in forward\n    res = DocumentConverterResult(\n        markdown=f\"Failed to fetch content from {url}\",\n        title=\"Error\",\n    )\nTypeError: DocumentConverterResult.__init__() got an unexpected keyword argument 'markdown'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/kkk/Apps/DeepResearchAgent/tests/integration/test_web_fetcher.py\", line 59, in <module>\n    content = asyncio.run(web_fetcher_tool.forward(url))\n  File \"/usr/lib/python3.13/asyncio/runners.py\", line 195, in run\n    return runner.run(main)\n           ~~~~~~~~~~^^^^^^\n  File \"/usr/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/usr/lib/python3.13/asyncio/base_events.py\", line 719, in run_until_complete\n    return future.result()\n           ~~~~~~~~~~~~~^^\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/web_fetcher.py\", line 45, in forward\n    res = DocumentConverterResult(\n        markdown=f\"Failed to fetch content: {e}\",\n        title=\"Error\",\n    )\nTypeError: DocumentConverterResult.__init__() got an unexpected keyword argument 'markdown'\nException ignored in: <function BaseSubprocessTransport.__del__ at 0x7bce79fe0900>\nTraceback (most recent call last):\n  File \"/usr/lib/python3.13/asyncio/base_subprocess.py\", line 130, in __del__\n    self.close()\n  File \"/usr/lib/python3.13/asyncio/base_subprocess.py\", line 107, in close\n    proto.pipe.close()\n  File \"/usr/lib/python3.13/asyncio/unix_events.py\", line 802, in close\n    self.write_eof()\n  File \"/usr/lib/python3.13/asyncio/unix_events.py\", line 788, in write_eof\n    self._loop.call_soon(self._call_connection_lost, None)\n  File \"/usr/lib/python3.13/asyncio/base_events.py\", line 827, in call_soon\n    self._check_closed()\n  File \"/usr/lib/python3.13/asyncio/base_events.py\", line 550, in _check_closed\n    raise RuntimeError('Event loop is closed')\nRuntimeError: Event loop is closed\n",
      "duration": 5.623525857925415,
      "success": false
    },
    "test_image_generator.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_image_generator.py",
      "description": "Integration Test: test_image_generator.py",
      "returncode": 0,
      "stdout": "INFO     [src.models.cli_detector] CLI Tool Detection Results:\nINFO     [src.models.cli_detector] \u2705 claude_code_cli: Available\nINFO     [src.models.cli_detector]    Version: claude-code-cli\nINFO     [src.models.cli_detector] \u2705 gemini_cli: Available\nINFO     [src.models.cli_detector]    Account: kairin@gmail.com\nINFO     [src.models.cli_detector] Available CLI model mappings:\nINFO     [src.models.cli_detector]   claude-3.7-sonnet-thinking \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude37-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude-4-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   gemini-2.5-pro \u2192 gemini-cli\nINFO     [src.models.cli_detector]   gemini-vision \u2192 gemini-cli\nINFO     [src.models.api_validator] API Validation Complete. Available providers: ['local']\nWARNING  [src.models.api_validator] OpenAI issues: ['API Key: OPENAI_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Anthropic issues: ['API Key: ANTHROPIC_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Google issues: ['Either GOOGLE_API_KEY or GOOGLE_APPLICATION_CREDENTIALS required']\nError: 'PlaceholderModel' object is not callable\n",
      "stderr": "\u001b[92m07:19:37 - logger:INFO\u001b[0m: test_image_generator.py:45 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:19:37 - logger:INFO\u001b[0m: test_image_generator.py:46 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n\u001b[92m07:19:37 - logger:INFO\u001b[0m: models.py:41 - Detecting CLI tools...\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: cli_models.py:348 - Registered Claude Code CLI models\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: cli_models.py:356 - Registered Gemini CLI models\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-code-cli\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-3.7-sonnet-thinking\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude37-sonnet\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-cli\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-2.5-pro\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:52 - Validating API configurations...\n\u001b[92m07:19:39 - logger:WARNING\u001b[0m: models.py:89 - Skipping OpenAI models - configuration invalid\n\u001b[92m07:19:39 - logger:WARNING\u001b[0m: models.py:97 - Skipping Anthropic models - configuration invalid\n\u001b[92m07:19:39 - logger:WARNING\u001b[0m: models.py:106 - Skipping Google models - configuration invalid\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:585 - Using local proxy for LangChain models\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:678 - Using local proxy for DeepSeek models\n\u001b[92m07:19:39 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:19:39 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:154 - Aliased 'claude-4-sonnet' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gemini-vision' -> 'qwen2.5-14b-instruct'\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4.1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4o' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3-deep-research' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:39 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'imagen' -> 'local-image-placeholder'\n\u001b[92m07:19:39 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-predict' -> 'local-video-placeholder'\n\u001b[92m07:19:39 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-fetch' -> 'local-video-placeholder'\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: models.py:77 - Successfully registered 25 models\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: test_image_generator.py:51 - Registed models: claude-code-cli, claude-3.7-sonnet-thinking, claude37-sonnet, gemini-cli, gemini-2.5-pro, qwen2.5-7b-instruct, qwen2.5-14b-instruct, qwen2.5-32b-instruct, Qwen, Qwen-VL, langchain-gpt-4o, langchain-gpt-4.1, langchain-o3, deepseek-chat, deepseek-reasoner, claude-4-sonnet, gemini-vision, gpt-4.1, gpt-4o, o1, o3, o3-deep-research, imagen, veo3-predict, veo3-fetch\n\u001b[92m07:19:39 - logger:INFO\u001b[0m: test_image_generator.py:54 - |                                      Registry of tool                                     \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Names                   \u2503 Objects                                                      \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 auto_browser_use_tool   \u2502 <class 'src.tools.auto_browser.AutoBrowserUseTool'>          \u2502\n\u2502 deep_analyzer_tool      \u2502 <class 'src.tools.deep_analyzer.DeepAnalyzerTool'>           \u2502\n\u2502 deep_researcher_tool    \u2502 <class 'src.tools.deep_researcher.DeepResearcherTool'>       \u2502\n\u2502 file_reader_tool        \u2502 <class 'src.tools.file_reader.FileReaderTool'>               \u2502\n\u2502 image_generator_tool    \u2502 <class 'src.tools.image_generator.ImageGeneratorTool'>       \u2502\n\u2502 oai_deep_research_tool  \u2502 <class 'src.tools.oai_deep_research.OAIDeepResearchTool'>    \u2502\n\u2502 planning_tool           \u2502 <class 'src.tools.planning.PlanningTool'>                    \u2502\n\u2502 python_interpreter_tool \u2502 <class 'src.tools.python_interpreter.PythonInterpreterTool'> \u2502\n\u2502 video_generator_tool    \u2502 <class 'src.tools.video_generator.VideoGeneratorTool'>       \u2502\n\u2502 web_fetcher_tool        \u2502 <class 'src.tools.web_fetcher.WebFetcherTool'>               \u2502\n\u2502 web_searcher_tool       \u2502 <class 'src.tools.web_searcher.WebSearcherTool'>             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u001b[92m07:19:52 - logger:WARNING\u001b[0m: image_generator.py:126 - ImageGeneratorTool failed to generate an optimized prompt: ChatMessage(role='assistant', content='\"Create a vivid image of a bustling futuristic city skyline bathed in the warm hues of sunset. The scene should feature sleek, aerodynamic flying cars zipping through the air at various altitudes, casting long shadows on the towering skyscrapers below. The buildings themselves are adorned with vibrant, pulsating neon lights in shades of electric blue, neon green, and deep purple, creating a mesmerizing glow against the backdrop of the setting sun. The sky transitions from fiery oranges and reds to soft pinks and purples, with wisps of clouds illuminated by the last rays of sunlight. In the foreground, a wide boulevard lined with holographic advertisements and advanced street lamps adds depth and scale to the scene.\"', tool_calls=None, raw=ChatCompletionOutput(choices=[ChatCompletionOutputComplete(finish_reason='stop', index=0, message=ChatCompletionOutputMessage(role='assistant', content='\"Create a vivid image of a bustling futuristic city skyline bathed in the warm hues of sunset. The scene should feature sleek, aerodynamic flying cars zipping through the air at various altitudes, casting long shadows on the towering skyscrapers below. The buildings themselves are adorned with vibrant, pulsating neon lights in shades of electric blue, neon green, and deep purple, creating a mesmerizing glow against the backdrop of the setting sun. The sky transitions from fiery oranges and reds to soft pinks and purples, with wisps of clouds illuminated by the last rays of sunlight. In the foreground, a wide boulevard lined with holographic advertisements and advanced street lamps adds depth and scale to the scene.\"', tool_call_id=None, tool_calls=None), logprobs=None)], created=1758064780726, id='a5b23194-980f-4685-a9d4-5d50345b9d3a', model='Qwen/Qwen2.5-32B-Instruct', system_fingerprint='', usage=ChatCompletionOutputUsage(completion_tokens=145, prompt_tokens=99, total_tokens=244), object='chat.completion'), token_usage=TokenUsage(input_tokens=99, output_tokens=145, total_tokens=244))\n\u001b[92m07:19:52 - logger:ERROR\u001b[0m: image_generator.py:162 - Image generation failed: 'PlaceholderModel' object is not callable\n",
      "duration": 19.58017134666443,
      "success": true
    },
    "test_models.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_models.py",
      "description": "Integration Test: test_models.py",
      "returncode": 0,
      "stdout": "INFO     [src.models.cli_detector] CLI Tool Detection Results:\nINFO     [src.models.cli_detector] \u2705 claude_code_cli: Available\nINFO     [src.models.cli_detector]    Version: claude-code-cli\nINFO     [src.models.cli_detector] \u2705 gemini_cli: Available\nINFO     [src.models.cli_detector]    Account: kairin@gmail.com\nINFO     [src.models.cli_detector] Available CLI model mappings:\nINFO     [src.models.cli_detector]   claude-3.7-sonnet-thinking \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude37-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude-4-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   gemini-2.5-pro \u2192 gemini-cli\nINFO     [src.models.cli_detector]   gemini-vision \u2192 gemini-cli\nINFO     [src.models.api_validator] API Validation Complete. Available providers: ['local']\nWARNING  [src.models.api_validator] OpenAI issues: ['API Key: OPENAI_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Anthropic issues: ['API Key: ANTHROPIC_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Google issues: ['Either GOOGLE_API_KEY or GOOGLE_APPLICATION_CREDENTIALS required']\nChatMessage(role='assistant', content=\"This riddle involves a clever trick with probabilities and logic rather than direct calculation. Let's break down the solution step-by-step:\\n\\n1. **Initial Setup**: There are 200 coins total, with 30 face-up and 170 face-down.\\n\\n2. **Action Taken**: The adventurer picks any 30 coins (without knowing their state) and flips them all over. This action changes the number of face-up and face-down coins within this subset but does not affect the overall count of face-up and face-down coins in the entire set.\\n\\n3. **Key Insight**: After flipping those 30 coins, the number of face-down coins in the smaller pile (of 30 coins) will be exactly equal to the number of face-down coins in the larger pile (of 170 coins). Here\u2019s why:\\n   - Suppose there were \\\\( x \\\\) face-down coins among the 30 picked.\\n   - Then there would be \\\\( 30 - x \\\\) face-up coins among these 30 coins.\\n   - When flipped, the \\\\( x \\\\) face-down coins become face-up, and the \\\\( 30 - x \\\\) face-up coins become face-down.\\n   - Therefore, after flipping, the smaller pile will have \\\\( 30 - x \\\\) face-down coins.\\n   - Since the total number of face-down coins remains 170, the larger pile must have \\\\( 170 - (30 - x) = 140 + x \\\\) face-down coins.\\n\\n4. **Given Information**: The larger pile has 14 face-down coins. Thus, we can set up the equation:\\n   \\\\[\\n   140 + x = 14\\n   \\\\]\\n   Solving for \\\\( x \\\\):\\n   \\\\[\\n   x = 14 - 140 = -126\\n   \\\\]\\n\\n5. **Interpretation**: The negative value indicates an inconsistency in the setup or interpretation. However, logically, the key point is that the number of face-down coins in both piles will match after the flip operation.\\n\\n6. **Outcome**: Given the problem's setup and the logical consistency, the adventurer successfully divides the coins such that both piles have an equal number of face-down coins. Therefore, the adventurer wins the challenge.\\n\\n**Conclusion**: The adventurer wins the game by ensuring both piles have an equal number of face-down coins.\", tool_calls=None, raw=ChatCompletionOutput(choices=[ChatCompletionOutputComplete(finish_reason='stop', index=0, message=ChatCompletionOutputMessage(role='assistant', content=\"This riddle involves a clever trick with probabilities and logic rather than direct calculation. Let's break down the solution step-by-step:\\n\\n1. **Initial Setup**: There are 200 coins total, with 30 face-up and 170 face-down.\\n\\n2. **Action Taken**: The adventurer picks any 30 coins (without knowing their state) and flips them all over. This action changes the number of face-up and face-down coins within this subset but does not affect the overall count of face-up and face-down coins in the entire set.\\n\\n3. **Key Insight**: After flipping those 30 coins, the number of face-down coins in the smaller pile (of 30 coins) will be exactly equal to the number of face-down coins in the larger pile (of 170 coins). Here\u2019s why:\\n   - Suppose there were \\\\( x \\\\) face-down coins among the 30 picked.\\n   - Then there would be \\\\( 30 - x \\\\) face-up coins among these 30 coins.\\n   - When flipped, the \\\\( x \\\\) face-down coins become face-up, and the \\\\( 30 - x \\\\) face-up coins become face-down.\\n   - Therefore, after flipping, the smaller pile will have \\\\( 30 - x \\\\) face-down coins.\\n   - Since the total number of face-down coins remains 170, the larger pile must have \\\\( 170 - (30 - x) = 140 + x \\\\) face-down coins.\\n\\n4. **Given Information**: The larger pile has 14 face-down coins. Thus, we can set up the equation:\\n   \\\\[\\n   140 + x = 14\\n   \\\\]\\n   Solving for \\\\( x \\\\):\\n   \\\\[\\n   x = 14 - 140 = -126\\n   \\\\]\\n\\n5. **Interpretation**: The negative value indicates an inconsistency in the setup or interpretation. However, logically, the key point is that the number of face-down coins in both piles will match after the flip operation.\\n\\n6. **Outcome**: Given the problem's setup and the logical consistency, the adventurer successfully divides the coins such that both piles have an equal number of face-down coins. Therefore, the adventurer wins the challenge.\\n\\n**Conclusion**: The adventurer wins the game by ensuring both piles have an equal number of face-down coins.\", tool_call_id=None, tool_calls=None), logprobs=None)], created=1758064799966, id='f0473f1d-53e3-4ca2-82a8-1d1e89b055c2', model='Qwen/Qwen2.5-32B-Instruct', system_fingerprint='', usage=ChatCompletionOutputUsage(completion_tokens=502, prompt_tokens=75, total_tokens=577), object='chat.completion'), token_usage=TokenUsage(input_tokens=75, output_tokens=502, total_tokens=577))\n",
      "stderr": "\u001b[92m07:19:57 - logger:INFO\u001b[0m: test_models.py:73 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:19:57 - logger:INFO\u001b[0m: test_models.py:74 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n\u001b[92m07:19:57 - logger:INFO\u001b[0m: models.py:41 - Detecting CLI tools...\n\u001b[92m07:19:58 - logger:INFO\u001b[0m: cli_models.py:348 - Registered Claude Code CLI models\n\u001b[92m07:19:58 - logger:INFO\u001b[0m: cli_models.py:356 - Registered Gemini CLI models\n\u001b[92m07:19:58 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-code-cli\n\u001b[92m07:19:58 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-3.7-sonnet-thinking\n\u001b[92m07:19:58 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude37-sonnet\n\u001b[92m07:19:58 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-cli\n\u001b[92m07:19:58 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-2.5-pro\n\u001b[92m07:19:58 - logger:INFO\u001b[0m: models.py:52 - Validating API configurations...\n\u001b[92m07:19:58 - logger:WARNING\u001b[0m: models.py:89 - Skipping OpenAI models - configuration invalid\n\u001b[92m07:19:58 - logger:WARNING\u001b[0m: models.py:97 - Skipping Anthropic models - configuration invalid\n\u001b[92m07:19:58 - logger:WARNING\u001b[0m: models.py:106 - Skipping Google models - configuration invalid\n\u001b[92m07:19:58 - logger:INFO\u001b[0m: models.py:585 - Using local proxy for LangChain models\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: models.py:678 - Using local proxy for DeepSeek models\n\u001b[92m07:19:59 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:19:59 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: models.py:154 - Aliased 'claude-4-sonnet' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gemini-vision' -> 'qwen2.5-14b-instruct'\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4.1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4o' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3-deep-research' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:19:59 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'imagen' -> 'local-image-placeholder'\n\u001b[92m07:19:59 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-predict' -> 'local-video-placeholder'\n\u001b[92m07:19:59 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-fetch' -> 'local-video-placeholder'\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: models.py:77 - Successfully registered 25 models\n\u001b[92m07:19:59 - logger:INFO\u001b[0m: test_models.py:79 - Registered models: claude-code-cli, claude-3.7-sonnet-thinking, claude37-sonnet, gemini-cli, gemini-2.5-pro, qwen2.5-7b-instruct, qwen2.5-14b-instruct, qwen2.5-32b-instruct, Qwen, Qwen-VL, langchain-gpt-4o, langchain-gpt-4.1, langchain-o3, deepseek-chat, deepseek-reasoner, claude-4-sonnet, gemini-vision, gpt-4.1, gpt-4o, o1, o3, o3-deep-research, imagen, veo3-predict, veo3-fetch\n",
      "duration": 45.80205225944519,
      "success": true
    },
    "test_python_interpreter.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_python_interpreter.py",
      "description": "Integration Test: test_python_interpreter.py",
      "returncode": 0,
      "stdout": "Stdout:\n\nOutput: [0, 1, 1, 2, 3, 5, 8, 13, 21, 34]\nSUCCESS: Fibonacci sequence validation passed\n",
      "stderr": "",
      "duration": 5.247510671615601,
      "success": true
    },
    "test_dataset.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_dataset.py",
      "description": "Integration Test: test_dataset.py",
      "returncode": 1,
      "stdout": "ERROR    [datasets.load] `trust_remote_code` is not supported anymore.\nPlease check that the Hugging Face dataset '/home/kkk/Apps/DeepResearchAgent/tests/data/hle' isn't based on a loading script and remove `trust_remote_code`.\nIf the dataset is based on a loading script, please ask the dataset author to remove it and convert it to a standard format like Parquet.\n",
      "stderr": "`trust_remote_code` is not supported anymore.\nPlease check that the Hugging Face dataset '/home/kkk/Apps/DeepResearchAgent/tests/data/hle' isn't based on a loading script and remove `trust_remote_code`.\nIf the dataset is based on a loading script, please ask the dataset author to remove it and convert it to a standard format like Parquet.\nTraceback (most recent call last):\n  File \"/home/kkk/Apps/DeepResearchAgent/tests/integration/test_dataset.py\", line 19, in <module>\n    dataset = HLEDataset(path=os.path.join(root, \"data\", \"hle\"), split=\"test\", name=\"hle\")\n  File \"/home/kkk/Apps/DeepResearchAgent/src/dataset/huggingface.py\", line 49, in __init__\n    ds = datasets.load_dataset(path, trust_remote_code=True)[split]\n         ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/datasets/load.py\", line 1392, in load_dataset\n    builder_instance = load_dataset_builder(\n        path=path,\n    ...<10 lines>...\n        **config_kwargs,\n    )\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/datasets/load.py\", line 1132, in load_dataset_builder\n    dataset_module = dataset_module_factory(\n        path,\n    ...<5 lines>...\n        cache_dir=cache_dir,\n    )\n  File \"/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/datasets/load.py\", line 1033, in dataset_module_factory\n    raise FileNotFoundError(f\"Couldn't find any data file at {relative_to_absolute_path(path)}.\")\nFileNotFoundError: Couldn't find any data file at /home/kkk/Apps/DeepResearchAgent/tests/data/hle.\n",
      "duration": 5.768061637878418,
      "success": false
    },
    "test_video_generator.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_video_generator.py",
      "description": "Integration Test: test_video_generator.py",
      "returncode": 0,
      "stdout": "INFO     [src.models.cli_detector] CLI Tool Detection Results:\nINFO     [src.models.cli_detector] \u2705 claude_code_cli: Available\nINFO     [src.models.cli_detector]    Version: claude-code-cli\nINFO     [src.models.cli_detector] \u2705 gemini_cli: Available\nINFO     [src.models.cli_detector]    Account: kairin@gmail.com\nINFO     [src.models.cli_detector] Available CLI model mappings:\nINFO     [src.models.cli_detector]   claude-3.7-sonnet-thinking \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude37-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   claude-4-sonnet \u2192 claude-code-cli\nINFO     [src.models.cli_detector]   gemini-2.5-pro \u2192 gemini-cli\nINFO     [src.models.cli_detector]   gemini-vision \u2192 gemini-cli\nINFO     [src.models.api_validator] API Validation Complete. Available providers: ['local']\nWARNING  [src.models.api_validator] OpenAI issues: ['API Key: OPENAI_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Anthropic issues: ['API Key: ANTHROPIC_API_KEY is placeholder or empty']\nWARNING  [src.models.api_validator] Google issues: ['Either GOOGLE_API_KEY or GOOGLE_APPLICATION_CREDENTIALS required']\nError: 'PlaceholderModel' object is not callable\n",
      "stderr": "\u001b[92m07:20:54 - logger:INFO\u001b[0m: test_video_generator.py:45 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:20:54 - logger:INFO\u001b[0m: test_video_generator.py:46 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n\u001b[92m07:20:54 - logger:INFO\u001b[0m: models.py:41 - Detecting CLI tools...\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: cli_models.py:348 - Registered Claude Code CLI models\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: cli_models.py:356 - Registered Gemini CLI models\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-code-cli\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude-3.7-sonnet-thinking\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: claude37-sonnet\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-cli\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:49 - Registered CLI model: gemini-2.5-pro\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:52 - Validating API configurations...\n\u001b[92m07:20:55 - logger:WARNING\u001b[0m: models.py:89 - Skipping OpenAI models - configuration invalid\n\u001b[92m07:20:55 - logger:WARNING\u001b[0m: models.py:97 - Skipping Anthropic models - configuration invalid\n\u001b[92m07:20:55 - logger:WARNING\u001b[0m: models.py:106 - Skipping Google models - configuration invalid\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:585 - Using local proxy for LangChain models\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:678 - Using local proxy for DeepSeek models\n\u001b[92m07:20:55 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:20:55 - logger:WARNING\u001b[0m: models.py:188 - Local API base SKYWORK_DEEPSEEK_API_BASE is not set, using remote API base SKYWORK_API_BASE\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:154 - Aliased 'claude-4-sonnet' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gemini-vision' -> 'qwen2.5-14b-instruct'\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4.1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:154 - Aliased 'gpt-4o' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o1' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:154 - Aliased 'o3-deep-research' -> 'qwen2.5-32b-instruct'\n\u001b[92m07:20:55 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'imagen' -> 'local-image-placeholder'\n\u001b[92m07:20:55 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-predict' -> 'local-video-placeholder'\n\u001b[92m07:20:55 - logger:WARNING\u001b[0m: models.py:158 - Created placeholder for 'veo3-fetch' -> 'local-video-placeholder'\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: models.py:77 - Successfully registered 25 models\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: test_video_generator.py:51 - Registed models: claude-code-cli, claude-3.7-sonnet-thinking, claude37-sonnet, gemini-cli, gemini-2.5-pro, qwen2.5-7b-instruct, qwen2.5-14b-instruct, qwen2.5-32b-instruct, Qwen, Qwen-VL, langchain-gpt-4o, langchain-gpt-4.1, langchain-o3, deepseek-chat, deepseek-reasoner, claude-4-sonnet, gemini-vision, gpt-4.1, gpt-4o, o1, o3, o3-deep-research, imagen, veo3-predict, veo3-fetch\n\u001b[92m07:20:55 - logger:INFO\u001b[0m: test_video_generator.py:54 - |                                      Registry of tool                                     \n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Names                   \u2503 Objects                                                      \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 auto_browser_use_tool   \u2502 <class 'src.tools.auto_browser.AutoBrowserUseTool'>          \u2502\n\u2502 deep_analyzer_tool      \u2502 <class 'src.tools.deep_analyzer.DeepAnalyzerTool'>           \u2502\n\u2502 deep_researcher_tool    \u2502 <class 'src.tools.deep_researcher.DeepResearcherTool'>       \u2502\n\u2502 file_reader_tool        \u2502 <class 'src.tools.file_reader.FileReaderTool'>               \u2502\n\u2502 image_generator_tool    \u2502 <class 'src.tools.image_generator.ImageGeneratorTool'>       \u2502\n\u2502 oai_deep_research_tool  \u2502 <class 'src.tools.oai_deep_research.OAIDeepResearchTool'>    \u2502\n\u2502 planning_tool           \u2502 <class 'src.tools.planning.PlanningTool'>                    \u2502\n\u2502 python_interpreter_tool \u2502 <class 'src.tools.python_interpreter.PythonInterpreterTool'> \u2502\n\u2502 video_generator_tool    \u2502 <class 'src.tools.video_generator.VideoGeneratorTool'>       \u2502\n\u2502 web_fetcher_tool        \u2502 <class 'src.tools.web_fetcher.WebFetcherTool'>               \u2502\n\u2502 web_searcher_tool       \u2502 <class 'src.tools.web_searcher.WebSearcherTool'>             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u001b[92m07:21:14 - logger:WARNING\u001b[0m: video_generator.py:159 - VideoGeneratorTool failed to generate an optimized prompt: ChatMessage(role='assistant', content=\"Generate a charming scene featuring a tiny, fluffy kitten with big, expressive eyes wearing a delicate pink dress adorned with lace and a bow. The kitten is playfully batting at a colorful cat teaser toy, which consists of a long, flexible wand with a feather and a small, jingling bell attached at the end. The background should be a cozy living room with soft lighting, creating a warm and inviting atmosphere. Capture the kitten's joyful movements and the slight flutter of the feathers as it interacts with the toy, emphasizing the playful and endearing nature of the scene.\", tool_calls=None, raw=ChatCompletionOutput(choices=[ChatCompletionOutputComplete(finish_reason='stop', index=0, message=ChatCompletionOutputMessage(role='assistant', content=\"Generate a charming scene featuring a tiny, fluffy kitten with big, expressive eyes wearing a delicate pink dress adorned with lace and a bow. The kitten is playfully batting at a colorful cat teaser toy, which consists of a long, flexible wand with a feather and a small, jingling bell attached at the end. The background should be a cozy living room with soft lighting, creating a warm and inviting atmosphere. Capture the kitten's joyful movements and the slight flutter of the feathers as it interacts with the toy, emphasizing the playful and endearing nature of the scene.\", tool_call_id=None, tool_calls=None), logprobs=None)], created=1758064864981, id='a229c7b0-f7dd-4bd1-b70a-d7f7e339f46b', model='Qwen/Qwen2.5-32B-Instruct', system_fingerprint='', usage=ChatCompletionOutputUsage(completion_tokens=114, prompt_tokens=100, total_tokens=214), object='chat.completion'), token_usage=TokenUsage(input_tokens=100, output_tokens=114, total_tokens=214))\n\u001b[92m07:21:14 - logger:ERROR\u001b[0m: video_generator.py:216 - Video generation failed: 'PlaceholderModel' object is not callable\n",
      "duration": 25.315825700759888,
      "success": true
    },
    "test_browser_use.py": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_browser_use.py",
      "description": "Integration Test: test_browser_use.py",
      "returncode": 1,
      "stdout": "Shutting down http.server...\n",
      "stderr": "Traceback (most recent call last):\n  File \"/home/kkk/Apps/DeepResearchAgent/tests/integration/test_browser_use.py\", line 48, in <module>\n    res = loop.run_until_complete(tool.forward(task=task3))\n  File \"/usr/lib/python3.13/asyncio/base_events.py\", line 719, in run_until_complete\n    return future.result()\n           ~~~~~~~~~~~~~^^\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/auto_browser.py\", line 101, in forward\n    result = await self._browser_task(task)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/kkk/Apps/DeepResearchAgent/src/tools/auto_browser.py\", line 78, in _browser_task\n    model = model_manager.registered_models[model_id]\n            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^\nKeyError: 'langchain-gpt-4.1'\n",
      "duration": 5.353007793426514,
      "success": false
    }
  },
  "app_tests": {
    "app_help": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/main.py --help",
      "description": "App Help Command",
      "returncode": 0,
      "stdout": "INFO     [src.compat.warnings_filter] Applying compatibility fixes...\nINFO     [src.compat.warnings_filter] Compatibility: Suppressing known warnings:\nINFO     [src.compat.warnings_filter]   - Pydantic v1 deprecation warnings\nINFO     [src.compat.warnings_filter]   - Python 3.13 aifc module warnings\nINFO     [src.compat.warnings_filter] These warnings are scheduled for resolution in Phase 1\nINFO     [src.compat.warnings_filter] Python version: 3.13\nINFO     [src.compat.warnings_filter] Compatibility fixes applied successfully\nusage: main.py [-h] [--tui]\n               {research,project-add,project-list,project-research,project-history,project-remove} ...\n\nDeepResearchAgent - Multi-Project Research Tool\n\npositional arguments:\n  {research,project-add,project-list,project-research,project-history,project-remove}\n                        Available commands\n    research            Run research tasks\n    project-add         Add a new project to the registry\n    project-list        List all projects in the registry\n    project-research    Run research on a specific project\n    project-history     Show research history for a project\n    project-remove      Remove a project from the registry\n\noptions:\n  -h, --help            show this help message and exit\n  --tui                 Launch TUI mode\n",
      "stderr": "/home/kkk/Apps/DeepResearchAgent/.venv/lib/python3.13/site-packages/litellm/llms/custom_httpx/async_client_cleanup.py:66: DeprecationWarning: There is no current event loop\n  loop = asyncio.get_event_loop()\n",
      "duration": 6.680620431900024,
      "success": true
    },
    "config_test": {
      "command": "uv run python /home/kkk/Apps/DeepResearchAgent/tests/integration/test_config.py",
      "description": "Config Test",
      "returncode": 0,
      "stdout": "",
      "stderr": "\u001b[92m07:21:31 - logger:INFO\u001b[0m: test_config.py:42 - | Logger initialized at: /home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt\n\u001b[92m07:21:31 - logger:INFO\u001b[0m: test_config.py:43 - | Config:\nagent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nauto_browser_use_tool_config = dict(\n    model_id='gpt-4.1', type='auto_browser_use_tool')\nconcurrency = 4\ndeep_analyzer_tool_config = dict(\n    analyzer_model_ids=[\n        'gemini-2.5-pro',\n    ],\n    summarizer_model_id='gemini-2.5-pro',\n    type='deep_analyzer_tool')\ndeep_researcher_tool_config = dict(\n    max_depth=2,\n    max_follow_ups=3,\n    max_insights=20,\n    model_id='gpt-4.1',\n    time_limit_seconds=60,\n    type='deep_researcher_tool')\nexp_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general'\nfile_reader_tool_config = dict(type='file_reader_tool')\ngeneral_agent_config = dict(\n    description='A general agent that can handle various tasks.',\n    max_steps=20,\n    mcp_tools=[\n        'calculate_average_of_deviations',\n        'calculate_statistical_average',\n        'get_wikipedia_page_revision_history',\n        'find_first_year_for_date',\n        'count_letter_frequency',\n        'calculate_remaining_letters',\n        'find_needed_letters',\n        'solve_annotator_error_puzzle',\n        'count_objects_in_image',\n        'verify_and_correct_isbn13',\n        'calculate_offspring_genotype_probabilities',\n        'format_as_percentage',\n        'count_next_door_neighbors',\n        'calculate_antipodal_coordinates',\n        'get_street_view_direction_of_object',\n        'execute_code_in_virtual_environment',\n        'find_book_title',\n        'calculate_final_beaker_weight',\n    ],\n    model_id='gpt-4.1',\n    name='general_agent',\n    provide_run_summary=True,\n    template_path='src/agent/general_agent/prompts/general_agent.yaml',\n    tools=[\n        'python_interpreter_tool',\n        'image_generator_tool',\n        'video_generator_tool',\n    ],\n    type='general_agent')\nimage_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    generator_model_id='imagen',\n    type='image_generator_tool')\nlog_path = '/home/kkk/Apps/DeepResearchAgent/workdir/general/log.txt'\nmcp_tools_config = dict(\n    mcpServers=dict(\n        LocalMCP=dict(\n            args=[\n                '/home/kkk/Apps/DeepResearchAgent/src/mcp/server.py',\n            ],\n            command='python',\n            env=dict(DEBUG='true'))))\noai_deep_research_tool_config = dict(\n    model_id='o3-deep-research', type='oai_deep_research_tool')\ntag = 'general'\nuse_hierarchical_agent = False\nuse_local_proxy = False\nvideo_generator_tool_config = dict(\n    analyzer_model_id='o3',\n    fetch_model_id='veo3-fetch',\n    predict_model_id='veo3-predict',\n    type='video_generator_tool')\nweb_fetcher_tool_config = dict(type='web_fetcher_tool')\nweb_searcher_tool_config = dict(\n    country='us',\n    engine='Firecrawl',\n    fetch_content=True,\n    lang='en',\n    max_length=4096,\n    max_retries=3,\n    num_results=5,\n    retry_delay=10,\n    type='web_searcher_tool')\nworkdir = 'workdir'\n\n",
      "duration": 5.223939657211304,
      "success": true
    }
  },
  "summary": {
    "total_tests": 16,
    "passed": 11,
    "failed": 5,
    "errors": 0,
    "duration": 0
  },
  "total_duration": 222.6050353050232
}